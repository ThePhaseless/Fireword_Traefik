# yaml-language-server: $schema=https://json.schemastore.org/traefik-v2-file-provider.json
http:
  routers:
    dashboard-router:
      rule: 'Host(`proxy.{{ env "PUBLIC_HOSTNAME" }}`)'
      service: dashboard-service
      middlewares:
        - authelia
      entryPoints:
        - websecure
      tls:
        certResolver: cloudflare
        domains:
          - main: '{{ env "PUBLIC_HOSTNAME" }}'
            sans:
              - '*.{{ env "PUBLIC_HOSTNAME" }}'
  services:
    dashboard-service:
      loadBalancer:
        servers:
          - url: 'http://{{ env "PROXY_IP" }}:8080'
